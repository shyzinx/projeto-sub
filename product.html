<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Produto | Sub Cultura</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* 1. AJUSTE PARA O HEADER FIXO N√ÉO COBRIR O CARD */
    body {
      padding-top: 80px; 
      overflow-x: hidden; 
    }

    .product-page {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: calc(100vh - 80px);
      background: #8e89c7;
      padding: 20px;
    }

    /* 2. CARD SEM BARRA DE ROLAGEM INTERNA */
    .product-card-container {
      background: #ffffff;
      width: 75%; 
      max-width: 1100px;
      height: auto; 
      min-height: 600px; 
      border-radius: 40px; 
      display: flex;
      box-shadow: 0 25px 50px rgba(0,0,0,0.3);
      overflow: visible; 
      color: #333;
      position: relative;
    }

    .product-left {
      flex: 1;
      background: #f8f8f8;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
      border-right: 1px solid #eee;
      border-radius: 40px 0 0 40px;
    }

    .img-wrapper {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .product-img {
      max-width: 100%; 
      max-height: 500px; 
      object-fit: contain;
      border-radius: 20px;
      transition: transform 0.3s ease;
    }

    .product-img:hover {
      transform: scale(1.05);
    }

    .product-right {
      flex: 1.2;
      padding: 60px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    #productName {
      font-size: 2.2rem;
      font-weight: 800;
      margin-bottom: 10px;
      text-transform: uppercase;
      color: #111;
    }

    #productDescription {
      font-size: 1rem;
      line-height: 1.5;
      color: #666;
      margin-bottom: 20px;
    }

    #productPrice {
      font-size: 1.8rem;
      font-weight: bold;
      color: #6f4cff;
      margin-bottom: 25px;
    }

    .selection-section label {
      font-weight: bold;
      display: block;
      margin-bottom: 15px;
      font-size: 0.9rem;
    }

    .sizes-container {
      display: flex;
      gap: 12px;
      margin-bottom: 25px;
    }

    .sizes-container button {
      min-width: 50px;
      height: 50px;
      border: 2px solid #eee;
      background: white;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      color: #333;
      transition: all 0.3s ease;
    }

    .sizes-container button:hover {
      background-color: #6f4cff;
      color: #ffffff;
      border-color: #6f4cff;
    }

    .sizes-container button.active {
      background: #4da3ff;
      color: white;
      border-color: #4da3ff;
    }

    .quantity-section {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .quantity-section button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 1px solid #ddd;
      background: white;
      cursor: pointer;
      font-size: 1.2rem;
      font-weight: bold;
      color: #333;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .quantity-section button:hover {
      background-color: #6f4cff;
      color: #ffffff;
      border-color: #6f4cff;
      transform: scale(1.1);
    }

    #qty { font-weight: bold; font-size: 1.2rem; }

    .buttons-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .btn-add {
      padding: 16px;
      border-radius: 15px;
      border: 2px solid #6f4cff;
      background: transparent;
      color: #6f4cff;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .btn-add:hover {
      background-color: #6f4cff;
      color: #ffffff;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(111, 76, 255, 0.3);
    }

    .btn-buy {
      padding: 16px;
      border-radius: 15px;
      border: none;
      background: #6f4cff; 
      color: white;
      font-size: 0.9rem;
      font-weight: bold;
      cursor: pointer;
      transition: 0.3s;
      text-transform: uppercase;
    }

    .btn-buy:hover { 
      background: #4da3ff; 
      transform: translateY(-3px);
    }

    .back-link {
      position: absolute;
      top: 30px;
      left: 30px;
      text-decoration: none;
      color: #888;
      font-weight: bold;
      font-size: 0.8rem;
      z-index: 10;
    }

    /* 3. ESTILOS DO CARRINHO */
    .cart-panel {
      position: fixed;
      top: 0;
      right: -400px;
      width: 340px;
      height: 100%;
      background: #fff;
      color: #000;
      padding: 24px;
      transition: right 0.3s ease;
      z-index: 1001;
      box-shadow: -10px 0 30px rgba(0,0,0,0.1);
    }
    .cart-panel.active { right: 0; }
    .overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; }
    .overlay.active { display: block; }

    @media (max-width: 850px) {
      .product-card-container { flex-direction: column; width: 95%; height: auto; }
      .product-left { height: auto; padding: 20px; border-right: none; border-bottom: 1px solid #eee; border-radius: 40px 40px 0 0; }
      .product-right { padding: 30px; }
      .product-img { max-width: 80%; max-height: 350px; }
    }
  </style>
</head>
<body>

<header class="header">
  <div class="logo">
    <a href="index.html">
      <img src="logo.svg" alt="Sub Cultura" style="height: 42px; display: block;">
    </a>
  </div>
  <nav class="menu">
    <a href="index.html">In√≠cio</a>
    <a href="index.html#calcas">Cal√ßas e Bermudas</a>
    <a href="index.html#camisetas">Camisetas</a>
    <a href="index.html#calcados">Cal√ßados</a>
    <a href="index.html#acessorios">Acess√≥rios</a>
  </nav>
  <div class="user-area">
    <span class="user-name">Visitante</span>
    <button class="logout-btn">Sair</button>
    <div class="cart" id="openCart">üõí</div>
  </div>
</header>

<main class="product-page">
  <div class="product-card-container">
    <a href="index.html" class="back-link">‚Üê VOLTAR</a>

    <div class="product-left">
      <div class="img-wrapper">
        <img class="product-img" id="mainImg" src="" alt="Carregando...">
      </div>
    </div>

    <div class="product-right">
      <h1 id="productName">Nome do Produto</h1>
      <p id="productDescription">Descri√ß√£o do produto.</p>
      <div id="productPrice">R$ 0,00</div>

      <div class="selection-section">
        <label>TAMANHOS</label>
        <div id="sizesBox" class="sizes-container"></div>
      </div>

      <div class="quantity-section">
        <button id="minusQty">-</button>
        <span id="qty">1</span>
        <button id="plusQty">+</button>
      </div>

      <div class="buttons-group">
        <button class="btn-add" id="addToCart">Adicionar ao Carrinho</button>
        <button class="btn-buy" id="buyNow">Comprar Agora</button>
      </div>
    </div>
  </div>
</main>

<div class="overlay" id="overlay"></div>
<div class="cart-panel" id="cartPanel">
  <div class="cart-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
    <h3 style="color: #333;">Seu Carrinho</h3>
    <span id="closeCart" style="cursor:pointer; font-weight:bold; color: #333;">X</span>
  </div>
  <div id="cartItems">
    <p id="emptyCartMsg" style="text-align: center; color: #888; margin-top: 40px;">Seu carrinho est√° vazio.</p>
  </div>
</div>

<script src="product.js"></script>

<script>
  const btnAdd = document.getElementById('addToCart');
  const cartPanel = document.getElementById('cartPanel');
  const overlay = document.getElementById('overlay');
  const closeCart = document.getElementById('closeCart');
  const openCartIcon = document.getElementById('openCart');

  function updateEmptyMsg() {
    const cartItems = document.getElementById('cartItems');
    const emptyMsg = document.getElementById('emptyCartMsg');
    const hasItems = cartItems.querySelectorAll('.cart-item').length > 0;
    if(emptyMsg) emptyMsg.style.display = hasItems ? 'none' : 'block';
  }

  const openCart = () => {
    cartPanel.classList.add('active');
    overlay.classList.add('active');
    if(typeof renderCart === 'function') renderCart(); 
    updateEmptyMsg();
  };

  const closeCartFunc = () => {
    cartPanel.classList.remove('active');
    overlay.classList.remove('active');
  };

  btnAdd.addEventListener('click', () => {
    const tamanhoSelecionado = document.querySelector('.sizes-container button.active');
    if(!tamanhoSelecionado){
      alert('Selecione um tamanho primeiro!');
      return;
    }

    const nome = document.getElementById('productName').textContent;
    const preco = document.getElementById('productPrice').textContent;
    const imagem = document.getElementById('mainImg').src;
    const quantidade = parseInt(document.getElementById('qty').textContent);

    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart.push({nome, preco, imagem, quantidade, tamanho: tamanhoSelecionado.textContent});
    localStorage.setItem('cart', JSON.stringify(cart));

    setTimeout(() => { openCart(); }, 100);
  });

  document.getElementById('buyNow').onclick = () => {
    const tamanhoSelecionado = document.querySelector('.sizes-container button.active');
    if(!tamanhoSelecionado){
      alert('Selecione um tamanho primeiro!');
      return;
    }
    const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));
    if(!usuarioLogado){
      alert('Voc√™ precisa fazer login para finalizar a compra.');
      // aqui voc√™ pode abrir o painel de login
      return;
    }
    alert('Redirecionando para o Checkout...');
  };

  openCartIcon.onclick = openCart;
  closeCart.onclick = closeCartFunc;
  overlay.onclick = closeCartFunc;

  const logoutBtn = document.querySelector(".logout-btn");
  if(logoutBtn){
    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("usuarioLogado");
      document.querySelector(".user-name").textContent = "Visitante";
    });
  }

  window.onload = updateEmptyMsg;
</script>
</body>
</html>
